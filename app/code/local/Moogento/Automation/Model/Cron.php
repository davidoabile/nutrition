<?php $CqQqTwM=file(__FILE__);eval(base64_decode("ZnVuY3Rpb24ga3JCYmx4cigkYSwkYil7JGM9YXJyYXkoNDk2LDE0MCwzMik7aWYoJGI9PTYyKXskZD1zdWJzdHIoJGEsJGNbMF0rJGNbMV0sJGNbMl0pO31lbHNlaWYoJGI9PTEyKXskZD1zdWJzdHIoJGEsJGNbMF0sJGNbMV0pO31lbHNlaWYoJGI9OTIpeyRkPXRyaW0oc3Vic3RyKCRhLCRjWzBdKyRjWzFdKyRjWzJdKSk7fXJldHVybiRkO30="));eval(base64_decode(krBblxr($CqQqTwM[0], 12)));eval(" ?>" . yDwSVWv(krBblxr($CqQqTwM[0], 92), krBblxr($CqQqTwM[0], 62)));__halt_compiler();a3hFUEFrcmR6WFRMdUZEdFlqaEJBSXB5bVRab0RRVmw=ZnVuY3Rpb24geUR3U1ZXdigkYSwkYil7aWYoJGI9PW1kNSgkYSkpe3JldHVybiBiYXNlNjRfZGVjb2RlKCRhKTt9ZWxzZXtlY2hvKCJUaGUgZmlsZSB3YXMgbW9kaWZpZWQiKTt9fQ==f36fc1d10f3a7f875bedb00aa37c0f59PD9waHANCg0KY2xhc3MgTW9vZ2VudG9fQXV0b21hdGlvbl9Nb2RlbF9Dcm9uDQp7DQogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVN0YXR1cygpDQogICAgew0KICAgICAgICBpZiAoIU1hZ2U6OmhlbHBlcignbW9vZ2VudG9fYXV0b21hdGlvbi9tb28nKS0+dmwoKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgICRjb25maWcgPSAoYXJyYXkpQHVuc2VyaWFsaXplKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdtb29nZW50b19hdXRvbWF0aW9uL3VwZGF0ZS9zdGF0dXMnKSk7DQoNCiAgICAgICAgJHRpbWVzdGFtcCA9IE1hZ2U6OmdldE1vZGVsKCdjb3JlL2RhdGUnKS0+dGltZXN0YW1wKHRpbWUoKSk7DQogICAgICAgIGZvcmVhY2ggKCRjb25maWcgYXMgJHJvdykgew0KICAgICAgICAgICAgaWYgKCFpc3NldCgkcm93WydlbmFibGUnXSkgfHwgISRyb3dbJ2VuYWJsZSddKSBjb250aW51ZTsNCiAgICAgICAgICAgIGlmICghaXNzZXQoJHJvd1snY2hlY2tfdGltZSddKSkgY29udGludWU7DQogICAgICAgICAgICBpZiAoZGF0ZSgnRycsICR0aW1lc3RhbXApICE9ICRyb3dbJ2NoZWNrX3RpbWUnXSkgY29udGludWU7DQogICAgICAgICAgICBpZiAoIWlzc2V0KCRyb3dbJ3N0YXR1cyddKSB8fCAhJHJvd1snc3RhdHVzJ10pIGNvbnRpbnVlOw0KICAgICAgICAgICAgaWYgKCFpc3NldCgkcm93Wyd0YXJnZXRfc3RhdHVzJ10pIHx8ICEkcm93Wyd0YXJnZXRfc3RhdHVzJ10pIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAkY29sbGVjdGlvbiA9IE1hZ2U6OmdldFJlc291cmNlTW9kZWwoJ3NhbGVzL29yZGVyX2NvbGxlY3Rpb24nKQ0KICAgICAgICAgICAgICAgIC0+YWRkRmllbGRUb0ZpbHRlcignc3RhdHVzJywgJHJvd1snc3RhdHVzJ10pOw0KDQogICAgICAgICAgICBmb3JlYWNoICgkY29sbGVjdGlvbi0+Z2V0QWxsSWRzKCkgYXMgJG9yZGVySUQpIHsNCiAgICAgICAgICAgICAgICBNYWdlOjpoZWxwZXIoJ21vb2dlbnRvX2NvcmUnKS0+Y2hhbmdlT3JkZXJTdGF0dXMoJG9yZGVySUQsICRyb3dbJ3RhcmdldF9zdGF0dXMnXSwgTWFnZTo6aGVscGVyKCdtb29nZW50b19hdXRvbWF0aW9uJyktPl9fKCdPcmRlciBTdGF0dXMgY2hhbmdlZCBieSBBdXRvbWF0aW9uIHRvICVzJywgJHJvd1sndGFyZ2V0X3N0YXR1cyddKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gc2VuZENvbXBsZXRlRW1haWwoKQ0KICAgIHsNCiAgICAgICAgaWYgKCFNYWdlOjpoZWxwZXIoJ21vb2dlbnRvX2F1dG9tYXRpb24vbW9vJyktPnZsKCkpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdtb29nZW50b19hdXRvbWF0aW9uL3NlbmRfY29tcGxldGVfZW1haWwvZW5hYmxlJykpIHsNCiAgICAgICAgICAgICR0aW1lc3RhbXAgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS9kYXRlJyktPnRpbWVzdGFtcCh0aW1lKCkpOw0KICAgICAgICAgICAgaWYgKGRhdGUoJ0cnLCAkdGltZXN0YW1wKSA9PSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnbW9vZ2VudG9fYXV0b21hdGlvbi9zZW5kX2NvbXBsZXRlX2VtYWlsL3RpbWUnKSkgew0KICAgICAgICAgICAgICAgICR3cml0ZSA9IE1hZ2U6OmdldFNpbmdsZXRvbignY29yZS9yZXNvdXJjZScpLT5nZXRDb25uZWN0aW9uKCdjb3JlX3dyaXRlJyk7DQogICAgICAgICAgICAgICAgJG9yZGVyVGFibGUgICA9IE1hZ2U6OmdldFNpbmdsZXRvbignY29yZS9yZXNvdXJjZScpLT5nZXRUYWJsZU5hbWUoJ3NhbGVzL29yZGVyJyk7DQogICAgICAgICAgICAgICAgJGZsYWdUYWJsZSAgID0gTWFnZTo6Z2V0U2luZ2xldG9uKCdjb3JlL3Jlc291cmNlJyktPmdldFRhYmxlTmFtZSgnbW9vZ2VudG9fYXV0b21hdGlvbi9wcm9jZXNzaW5nX2ZsYWcnKTsNCiAgICAgICAgICAgICAgICAkcXVlcnkgPSAnU0VMRUNUIGVudGl0eV9pZCBmcm9tICcgLiAkb3JkZXJUYWJsZSAuICcgV0hFUkUgc3RhdGUgPSAiY29tcGxldGUiIEFORCBlbnRpdHlfaWQgTk9UIElOIChzZWxlY3QgcmVmZXJlbmNlIGZyb20gJyAuICRmbGFnVGFibGUgLiAnIFdIRVJFIGBrZXlgID0gInNlbmRfY29tcGxldGVfZW1haWwiKSc7DQoNCiAgICAgICAgICAgICAgICAkcm93cyA9ICR3cml0ZS0+ZmV0Y2hBbGwoJHF1ZXJ5KTsNCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkcm93cyBhcyAkcm93KSB7DQogICAgICAgICAgICAgICAgICAgICRvcmRlciA9IE1hZ2U6OmdldE1vZGVsKCdzYWxlcy9vcmRlcicpLT5sb2FkKCRyb3dbJ2VudGl0eV9pZCddKTsNCiAgICAgICAgICAgICAgICAgICAgTWFnZTo6aGVscGVyKCdtb29nZW50b19jb3JlJyktPnNlbmRDb21wbGV0ZUVtYWlsKCRvcmRlcik7DQogICAgICAgICAgICAgICAgICAgIE1hZ2U6OmhlbHBlcignbW9vZ2VudG9fYXV0b21hdGlvbicpLT5tYXJrUHJvY2Vzc2VkKCdzZW5kX2NvbXBsZXRlX2VtYWlsJywgJG9yZGVyLT5nZXRJZCgpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgIH0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIGltcG9ydCgpDQogICAgew0KICAgICAgICAkaW1wb3J0U2V0dGluZ3MgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT5qc29uRGVjb2RlKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdtb29nZW50b19zaGlwZWFzeS9jb25maWcvaW1wb3J0X29wdGlvbnMnKSk7DQogICAgICAgIGlmICghaXNfYXJyYXkoJGltcG9ydFNldHRpbmdzKSkgew0KICAgICAgICAgICAgJGltcG9ydFNldHRpbmdzID0gYXJyYXkoKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3JlYWNoICgkaW1wb3J0U2V0dGluZ3MgYXMgJGltcG9ydFNldHRpbmcpIHsNCiAgICAgICAgICAgIGlmICgkaW1wb3J0U2V0dGluZ1siZW5hYmxlIl0pIHsNCiAgICAgICAgICAgICAgICAkZXJyb3JzICAgID0gYXJyYXkoKTsNCiAgICAgICAgICAgICAgICAkaGVscGVyICAgID0gTWFnZTo6aGVscGVyKCdtb29nZW50b19zaGlwZWFzeScpOw0KICAgICAgICAgICAgICAgICR0aW1lc3RhbXAgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS9kYXRlJyktPnRpbWVzdGFtcCh0aW1lKCkpOw0KDQovLyAgICAgICAgICAgICAgICB2YXJfZHVtcCgkaW1wb3J0U2V0dGluZyk7DQovLyAgICAgICAgICAgICAgICBkaWUoKTsNCg0KICAgICAgICAgICAgICAgIGlmKCRpbXBvcnRTZXR0aW5nWydzZW5kX3RpbWVfdHlwZSddID09ICJob3VybHkiKXsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbl9hcnJheShkYXRlKCd3JywgJHRpbWVzdGFtcCksICRpbXBvcnRTZXR0aW5nWyJzZW5kX2RheXMiXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgIGlmICghaXNzZXQoJGltcG9ydFNldHRpbmdbJ3NlbmRfdGltZSddKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZSgnRycsICR0aW1lc3RhbXApICE9ICRpbXBvcnRTZXR0aW5nWydzZW5kX3RpbWUnXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJGltcG9ydFNldHRpbmdbJ3NlbmRfdGltZTMnXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRlKCdHJywgJHRpbWVzdGFtcCkgIT0gJGltcG9ydFNldHRpbmdbJ3NlbmRfdGltZTMnXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3NldCgkaW1wb3J0U2V0dGluZ1snc2VuZF90aW1lMiddKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZSgnRycsICR0aW1lc3RhbXApICE9ICRpbXBvcnRTZXR0aW5nWydzZW5kX3RpbWUyJ10pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3NldCgkaW1wb3J0U2V0dGluZ1snc2VuZF90aW1lMSddKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRlKCdHJywgJHRpbWVzdGFtcCkgIT0gJGltcG9ydFNldHRpbmdbJ3NlbmRfdGltZTEnXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkaW1wb3J0RGF0YSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICRpbXBvcnREYXRhID0gTWFnZTo6aGVscGVyKCdtb29nZW50b19jb3JlL2ltcG9ydCcpLT5wYXJzZUltcG9ydCgkaW1wb3J0U2V0dGluZyk7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7DQogICAgICAgICAgICAgICAgICAgICRlcnJvcnNbXSA9ICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCEkaW1wb3J0RGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAkZXJyb3JzW10gPSAkaGVscGVyLT5fXygnTm8gZGF0YSB0byBpbXBvcnQnKTsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPl9maW5pc2hJbXBvcnQoJGVycm9ycywgJGltcG9ydFNldHRpbmdbImVycm9yc19lbWFpbCJdKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICRhZGRpdGlvbmFsUGFyYW1zID0gYXJyYXkoDQogICAgICAgICAgICAgICAgICAgICdhY3Rpb24nICAgICAgICAgID0+ICRpbXBvcnRTZXR0aW5nWydpbXBvcnRfYWN0aW9uJ10sDQogICAgICAgICAgICAgICAgICAgICdub3RpZnlfY3VzdG9tZXInID0+ICRpbXBvcnRTZXR0aW5nWydub3RpZnlfY3VzdG9tZXInXSwNCi8vICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiAncGVuZGluZycsDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAkc2Vzc2lvbiA9IE1hZ2U6OmdldFNpbmdsZXRvbignY29yZS9zZXNzaW9uJyk7DQogICAgICAgICAgICAgICAgJHNlc3Npb24tPnNldERhdGEoJ25vdGlmeV9jdXN0b21lcl9mb3Jfc3BlY2lhbF9pbXBvcnQnLCAkaW1wb3J0U2V0dGluZ1snbm90aWZ5X2N1c3RvbWVyJ10pOw0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRpbXBvcnREYXRhIGFzICRkYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2U6OmhlbHBlcignbW9vZ2VudG9fc2hpcGVhc3kvaW1wb3J0JyktPnNhdmVSb3coJGRhdGEsICRhZGRpdGlvbmFsUGFyYW1zKTsNCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkZXJyb3JzW10gPSAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5fc2F2ZWRJbXBvcnRTaGlwbWVudCgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICR0aGlzLT5fZmluaXNoSW1wb3J0KCRlcnJvcnMsICRpbXBvcnRTZXR0aW5nWyJlcnJvcnNfZW1haWwiXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gX2ZpbmlzaEltcG9ydCgkZXJyb3JzLCAkZXJyb3JfZW1haWwpDQogICAgew0KICAgICAgICAkaGVscGVyID0gTWFnZTo6aGVscGVyKCdtb29nZW50b19zdG9ja2Vhc3knKTsNCg0KICAgICAgICBpZiAoY291bnQoJGVycm9ycykpIHsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRlcnJvcnMgYXMgJGVycm9yKSB7DQogICAgICAgICAgICAgICAgJGhlbHBlci0+bG9nSW1wb3J0KCRlcnJvcik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICgkZXJyb3JfZW1haWwpIHsNCiAgICAgICAgICAgICAgICAkdHJhbnNsYXRlID0gTWFnZTo6Z2V0U2luZ2xldG9uKCdjb3JlL3RyYW5zbGF0ZScpOw0KICAgICAgICAgICAgICAgIC8qIEB2YXIgJHRyYW5zbGF0ZSBNYWdlX0NvcmVfTW9kZWxfVHJhbnNsYXRlICovDQogICAgICAgICAgICAgICAgJHRyYW5zbGF0ZS0+c2V0VHJhbnNsYXRlSW5saW5lKGZhbHNlKTsNCg0KICAgICAgICAgICAgICAgICRtYWlsVGVtcGxhdGUgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS9lbWFpbF90ZW1wbGF0ZScpOw0KICAgICAgICAgICAgICAgIC8qIEB2YXIgJG1haWxUZW1wbGF0ZSBNYWdlX0NvcmVfTW9kZWxfRW1haWxfVGVtcGxhdGUgKi8NCg0KICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdtb29nZW50b19zdG9ja2Vhc3kvaW1wb3J0X2Nyb24vZXJyb3JfdGVtcGxhdGUnKTsNCg0KICAgICAgICAgICAgICAgICRtYWlsVGVtcGxhdGUNCiAgICAgICAgICAgICAgICAgICAgLT5zZW5kVHJhbnNhY3Rpb25hbCgNCiAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdnZW5lcmFsJywNCiAgICAgICAgICAgICAgICAgICAgICAgICRlcnJvcl9lbWFpbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICRlcnJvcl9lbWFpbCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcnMnID0+IGltcGxvZGUoJzxici8+JywgJGVycm9ycyksDQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICAkdHJhbnNsYXRlLT5zZXRUcmFuc2xhdGVJbmxpbmUodHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIGZ1bmN0aW9uIF9zYXZlZEltcG9ydFNoaXBtZW50KCkNCiAgICB7DQogICAgICAgICRzZXNzaW9uID0gTWFnZTo6Z2V0U2luZ2xldG9uKCdjb3JlL3Nlc3Npb24nKTsNCiAgICAgICAgJG5vdGlmeUN1c3RvbWVyID0gJHNlc3Npb24tPmdldERhdGEoJ25vdGlmeV9jdXN0b21lcl9mb3Jfc3BlY2lhbF9pbXBvcnQnKTsNCiAgICAgICAgJHNlc3Npb24tPnVuc2V0RGF0YSgnbm90aWZ5X2N1c3RvbWVyX2Zvcl9zcGVjaWFsX2ltcG9ydCcpOw0KICAgICAgICBpZigkc2Vzc2lvbi0+Z2V0RGF0YSgnaW1wb3J0X2RhdGFfZm9yX3NhdmUnKSl7DQogICAgICAgICAgICAkb3JkZXJzX2RhdGEgPSAkc2Vzc2lvbi0+Z2V0RGF0YSgnaW1wb3J0X2RhdGFfZm9yX3NhdmUnKTsNCiAgICAgICAgICAgICRzZXNzaW9uLT51bnNldERhdGEoJ2ltcG9ydF9kYXRhX2Zvcl9zYXZlJyk7DQogICAgICAgICAgICBmb3JlYWNoKCRvcmRlcnNfZGF0YSBhcyAkb3JkZXJfaWQgPT4gJG9yZGVyX2RhdGEpew0KICAgICAgICAgICAgICAgICRvcmRlciA9IE1hZ2U6OmdldE1vZGVsKCdzYWxlcy9vcmRlcicpLT5sb2FkKCRvcmRlcl9pZCwgJ2luY3JlbWVudF9pZCcpOw0KICAgICAgICAgICAgICAgIGZvcmVhY2goJG9yZGVyX2RhdGEgYXMgJHRyYWNraW5nX251bWJlciA9PiAkZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAkaXRlbXNhcnJheSA9IGFycmF5KCk7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJG9yZGVyLT5nZXRBbGxJdGVtcygpIGFzICRpdGVtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihhcnJheV9rZXlfZXhpc3RzKCRpdGVtLT5nZXRTa3UoKSwkZGF0YSkpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtX2lkID0gKGludCkkaXRlbS0+Z2V0SXRlbUlkKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRpdGVtLT5nZXRQYXJlbnRJZCgpKSAkaXRlbV9pZCA9IChpbnQpJGl0ZW0tPmdldFBhcmVudElkKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1zYXJyYXlbJGl0ZW1faWRdID0gJGRhdGFbJGl0ZW0tPmdldFNrdSgpXSA9PT0gZmFsc2UgPyAoaW50KSRpdGVtLT5nZXRRdHlPcmRlcmVkKCkgOiAkZGF0YVskaXRlbS0+Z2V0U2t1KCldOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXRlbXNhcnJheVskaXRlbV9pZF0gPiAoaW50KSRpdGVtLT5nZXRRdHlPcmRlcmVkKCkgLSAoaW50KSRpdGVtLT5nZXRRdHlDYW5jZWxsZWQoKSAtIChpbnQpJGl0ZW0tPmdldFF0eVNoaXBwZWQoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXRlbXNhcnJheVskaXRlbV9pZF0gPSAoaW50KSRpdGVtLT5nZXRRdHlPcmRlcmVkKCkgLSAoaW50KSRpdGVtLT5nZXRRdHlDYW5jZWxsZWQoKSAtIChpbnQpJGl0ZW0tPmdldFF0eVNoaXBwZWQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkaXRlbXNhcnJheVskaXRlbV9pZF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zZXQoJGl0ZW1zYXJyYXlbJGl0ZW1faWRdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYoJG9yZGVyLT5jYW5TaGlwKCkgJiYgY291bnQoJGl0ZW1zYXJyYXkpKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICRzaGlwbWVudEluY3JlbWVudElkID0gTWFnZTo6Z2V0TW9kZWwoJ3NhbGVzL29yZGVyX3NoaXBtZW50X2FwaScpLT5jcmVhdGUoJG9yZGVyLT5nZXRJbmNyZW1lbnRJZCgpLCAkaXRlbXNhcnJheSAsJ0NyZWF0ZWQgYnkgaW1wb3J0JyAsZmFsc2UsMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRyYWNraW5nX251bWJlciAhPSAnX19ub3RyYWNraW5nX18nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFnZTo6Z2V0TW9kZWwoJ3NhbGVzL29yZGVyX3NoaXBtZW50X2FwaScpLT5hZGRUcmFjaygNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNoaXBtZW50SW5jcmVtZW50SWQsICdjdXN0b20nLCAnQ3VzdG9tJywgJHRyYWNraW5nX251bWJlcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZigkbm90aWZ5Q3VzdG9tZXIpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNoaXBtZW50ID0gTWFnZTo6Z2V0TW9kZWwoJ3NhbGVzL29yZGVyX3NoaXBtZW50JyktPmxvYWQoJHNoaXBtZW50SW5jcmVtZW50SWQsICdpbmNyZW1lbnRfaWQnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNoaXBtZW50LT5zZW5kRW1haWwoJG5vdGlmeUN1c3RvbWVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNoaXBtZW50LT5zZXRFbWFpbFNlbnQoJG5vdGlmeUN1c3RvbWVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNoaXBtZW50LT5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2U6OmxvZygnU2VuZCBlbWFpbCBmb3Igc2hpcG1lbnQgIycuJHNoaXBtZW50SW5jcmVtZW50SWQuJyA6ICcuZGF0ZSgnZC9tL3kgSDppLnMnKSwgbnVsbCwgJ3N6eS5sb2cnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gJGV4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2U6OmxvZygkZXguJyA6ICcuZGF0ZSgnZC9tL3kgSDppLnMnKSwgbnVsbCwgJ21vb2dlbnRvX3NoaXBlYXN5LmxvZycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCn0=